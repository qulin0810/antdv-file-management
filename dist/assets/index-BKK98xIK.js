import{c as t,I as R,R as se,S as ue,d as ie,r as g,h as U,b as D,w as n,e as d,o as O,f as N,g as c,u as w,k as j,l as B,t as C,m as de,U as ce,_ as me}from"./index-18XKJJX4.js";var fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};function V(r){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),s.forEach(function(u){pe(r,u,l[u])})}return r}function pe(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var T=function(a,l){var s=V({},a,l.attrs);return t(R,V({},s,{icon:se}),null)};T.displayName="ReloadOutlined";T.inheritAttrs=!1;function q(r){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),s.forEach(function(u){ve(r,u,l[u])})}return r}function ve(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var A=function(a,l){var s=q({},a,l.attrs);return t(R,q({},s,{icon:ue}),null)};A.displayName="SearchOutlined";A.inheritAttrs=!1;function M(r){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),s.forEach(function(u){_e(r,u,l[u])})}return r}function _e(r,a,l){return a in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,r}var $=function(a,l){var s=M({},a,l.attrs);return t(R,M({},s,{icon:fe}),null)};$.displayName="UserAddOutlined";$.inheritAttrs=!1;const ge={class:"user-management"},be={class:"search-area mb-6"},ye={class:"action-area mb-4"},Oe=ie({__name:"index",setup(r){const a=g(),l=g(),s=g(!1),u=g(!1),h=g(!1),b=U({username:"",email:""}),m=U({username:"",email:"",role:"user",status:"active"}),L={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},k=U({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:o=>`共 ${o} 条记录`}),J=[{title:"用户名",dataIndex:"username",key:"username",width:"20%"},{title:"邮箱",dataIndex:"email",key:"email",width:"25%"},{title:"角色",dataIndex:"role",key:"role",width:"15%"},{title:"状态",dataIndex:"status",key:"status",width:"15%"},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:"15%"},{title:"操作",key:"action",width:"10%"}],y=g([{key:"1",username:"admin",email:"admin@example.com",role:"admin",status:"active",createTime:"2024-01-15 10:30"},{key:"2",username:"user1",email:"user1@example.com",role:"user",status:"active",createTime:"2024-01-16 14:20"},{key:"3",username:"user2",email:"user2@example.com",role:"user",status:"inactive",createTime:"2024-01-17 09:15"},{key:"4",username:"guest1",email:"guest1@example.com",role:"guest",status:"active",createTime:"2024-01-18 16:45"}]),Q=o=>({admin:"red",user:"blue",guest:"orange"})[o]||"default",S=()=>{s.value=!0,setTimeout(()=>{s.value=!1,k.total=y.value.length},500)},G=()=>{var o;(o=a.value)==null||o.resetFields(),S()},H=()=>{var o;h.value=!1,(o=l.value)==null||o.resetFields(),u.value=!0},W=o=>{h.value=!0,Object.assign(m,o),u.value=!0},X=o=>{o.status=o.status==="active"?"inactive":"active"},Y=o=>{const e=y.value.findIndex(p=>p.key===o.key);e>-1&&y.value.splice(e,1)},Z=(o,e,p)=>{k.current=(o==null?void 0:o.current)||1,k.pageSize=(o==null?void 0:o.pageSize)||10,S()},K=async()=>{var o;try{if(await((o=l.value)==null?void 0:o.validate()),h.value)console.log("编辑用户:",m);else{const e={key:Date.now().toString(),...m,createTime:new Date().toLocaleString()};y.value.unshift(e)}u.value=!1}catch(e){console.log("表单验证失败:",e)}},ee=()=>{u.value=!1};return S(),(o,e)=>{const p=d("a-input"),v=d("a-form-item"),_=d("a-button"),x=d("a-space"),z=d("a-form"),F=d("a-tag"),te=d("a-popconfirm"),ae=d("a-table"),ne=d("a-card"),P=d("a-select-option"),le=d("a-select"),I=d("a-radio"),re=d("a-radio-group"),oe=d("a-modal");return O(),D("div",ge,[t(ne,null,{default:n(()=>[N("div",be,[t(z,{ref_key:"searchFormRef",ref:a,model:b,layout:"inline",onFinish:S},{default:n(()=>[t(v,{label:"用户名",name:"username"},{default:n(()=>[t(p,{value:b.username,"onUpdate:value":e[0]||(e[0]=i=>b.username=i),placeholder:"请输入用户名","allow-clear":""},null,8,["value"])]),_:1}),t(v,{label:"邮箱",name:"email"},{default:n(()=>[t(p,{value:b.email,"onUpdate:value":e[1]||(e[1]=i=>b.email=i),placeholder:"请输入邮箱","allow-clear":""},null,8,["value"])]),_:1}),t(v,null,{default:n(()=>[t(x,null,{default:n(()=>[t(_,{type:"primary","html-type":"submit"},{icon:n(()=>[t(w(A))]),default:n(()=>[e[7]||(e[7]=c(" 搜索 ",-1))]),_:1}),t(_,{onClick:G},{icon:n(()=>[t(w(T))]),default:n(()=>[e[8]||(e[8]=c(" 重置 ",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),N("div",ye,[t(x,null,{default:n(()=>[t(_,{type:"primary",onClick:H},{icon:n(()=>[t(w($))]),default:n(()=>[e[9]||(e[9]=c(" 新增用户 ",-1))]),_:1})]),_:1})]),t(ae,{columns:J,"data-source":y.value,pagination:k,loading:s.value,onChange:Z},{headerCell:n(({column:i})=>[i.key==="username"?(O(),D(de,{key:0},[t(w(ce),{class:"mr-1"}),c(" "+C(i.title),1)],64)):B("",!0)]),bodyCell:n(({column:i,record:f})=>[i.key==="status"?(O(),j(F,{key:0,color:f.status==="active"?"green":"red"},{default:n(()=>[c(C(f.status==="active"?"启用":"禁用"),1)]),_:2},1032,["color"])):i.key==="role"?(O(),j(F,{key:1,color:Q(f.role)},{default:n(()=>[c(C(f.role),1)]),_:2},1032,["color"])):i.key==="action"?(O(),j(x,{key:2},{default:n(()=>[t(_,{type:"link",size:"small",onClick:E=>W(f)},{default:n(()=>[...e[10]||(e[10]=[c(" 编辑 ",-1)])]),_:1},8,["onClick"]),t(_,{type:"link",size:"small",danger:f.status==="active",onClick:E=>X(f)},{default:n(()=>[c(C(f.status==="active"?"禁用":"启用"),1)]),_:2},1032,["danger","onClick"]),t(te,{title:"确定要删除这个用户吗？",onConfirm:E=>Y(f)},{default:n(()=>[t(_,{type:"link",size:"small",danger:""},{default:n(()=>[...e[11]||(e[11]=[c("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):B("",!0)]),_:1},8,["data-source","pagination","loading"])]),_:1}),t(oe,{open:u.value,"onUpdate:open":e[6]||(e[6]=i=>u.value=i),title:h.value?"编辑用户":"新增用户",onOk:K,onCancel:ee},{default:n(()=>[t(z,{ref_key:"editFormRef",ref:l,model:m,rules:L,layout:"vertical"},{default:n(()=>[t(v,{label:"用户名",name:"username"},{default:n(()=>[t(p,{value:m.username,"onUpdate:value":e[2]||(e[2]=i=>m.username=i),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),t(v,{label:"邮箱",name:"email"},{default:n(()=>[t(p,{value:m.email,"onUpdate:value":e[3]||(e[3]=i=>m.email=i),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),t(v,{label:"角色",name:"role"},{default:n(()=>[t(le,{value:m.role,"onUpdate:value":e[4]||(e[4]=i=>m.role=i),placeholder:"请选择角色"},{default:n(()=>[t(P,{value:"admin"},{default:n(()=>[...e[12]||(e[12]=[c("管理员",-1)])]),_:1}),t(P,{value:"user"},{default:n(()=>[...e[13]||(e[13]=[c("普通用户",-1)])]),_:1}),t(P,{value:"guest"},{default:n(()=>[...e[14]||(e[14]=[c("访客",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(v,{label:"状态",name:"status"},{default:n(()=>[t(re,{value:m.status,"onUpdate:value":e[5]||(e[5]=i=>m.status=i)},{default:n(()=>[t(I,{value:"active"},{default:n(()=>[...e[15]||(e[15]=[c("启用",-1)])]),_:1}),t(I,{value:"inactive"},{default:n(()=>[...e[16]||(e[16]=[c("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),ke=me(Oe,[["__scopeId","data-v-83f92709"]]);export{ke as default};
