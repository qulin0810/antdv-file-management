import{S as ae,R as le}from"./SearchOutlined-DUQJIuJG.js";import{c as t,I as ne,d as oe,r as g,h as T,a as j,w as a,b as o,o as b,e as B,f as s,u as x,k as z,l as D,t as O,n as se,U as re,_ as ue}from"./index-zdkt74yQ.js";var ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};function N(m){for(var r=1;r<arguments.length;r++){var u=arguments[r]!=null?Object(arguments[r]):{},c=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(u).filter(function(d){return Object.getOwnPropertyDescriptor(u,d).enumerable}))),c.forEach(function(d){de(m,d,u[d])})}return m}function de(m,r,u){return r in m?Object.defineProperty(m,r,{value:u,enumerable:!0,configurable:!0,writable:!0}):m[r]=u,m}var F=function(r,u){var c=N({},r,u.attrs);return t(ne,N({},c,{icon:ie}),null)};F.displayName="UserAddOutlined";F.inheritAttrs=!1;const me={class:"user-management"},ce={class:"search-area mb-6"},fe={class:"action-area mb-4"},ve=oe({__name:"index",setup(m){const r=g(),u=g(),c=g(!1),d=g(!1),h=g(!1),y=T({username:"",email:""}),i=T({username:"",email:"",role:"user",status:"active"}),P={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},C=T({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:l=>`共 ${l} 条记录`}),V=[{title:"用户名",dataIndex:"username",key:"username",width:"20%"},{title:"邮箱",dataIndex:"email",key:"email",width:"25%"},{title:"角色",dataIndex:"role",key:"role",width:"15%"},{title:"状态",dataIndex:"status",key:"status",width:"15%"},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:"15%"},{title:"操作",key:"action",width:"10%"}],k=g([{key:"1",username:"admin",email:"admin@example.com",role:"admin",status:"active",createTime:"2024-01-15 10:30"},{key:"2",username:"user1",email:"user1@example.com",role:"user",status:"active",createTime:"2024-01-16 14:20"},{key:"3",username:"user2",email:"user2@example.com",role:"user",status:"inactive",createTime:"2024-01-17 09:15"},{key:"4",username:"guest1",email:"guest1@example.com",role:"guest",status:"active",createTime:"2024-01-18 16:45"}]),$=l=>({admin:"red",user:"blue",guest:"orange"})[l]||"default",w=()=>{c.value=!0,setTimeout(()=>{c.value=!1,C.total=k.value.length},500)},q=()=>{var l;(l=r.value)==null||l.resetFields(),w()},M=()=>{var l;h.value=!1,(l=u.value)==null||l.resetFields(),d.value=!0},L=l=>{h.value=!0,Object.assign(i,l),d.value=!0},J=l=>{l.status=l.status==="active"?"inactive":"active"},Q=l=>{const e=k.value.findIndex(v=>v.key===l.key);e>-1&&k.value.splice(e,1)},G=(l,e,v)=>{C.current=(l==null?void 0:l.current)||1,C.pageSize=(l==null?void 0:l.pageSize)||10,w()},H=async()=>{var l;try{if(await((l=u.value)==null?void 0:l.validate()),h.value)console.log("编辑用户:",i);else{const e={key:Date.now().toString(),...i,createTime:new Date().toLocaleString()};k.value.unshift(e)}d.value=!1}catch(e){console.log("表单验证失败:",e)}},W=()=>{d.value=!1};return w(),(l,e)=>{const v=o("a-input"),p=o("a-form-item"),_=o("a-button"),S=o("a-space"),A=o("a-form"),I=o("a-tag"),X=o("a-popconfirm"),Y=o("a-table"),Z=o("a-card"),U=o("a-select-option"),K=o("a-select"),R=o("a-radio"),ee=o("a-radio-group"),te=o("a-modal");return b(),j("div",me,[t(Z,null,{default:a(()=>[B("div",ce,[t(A,{ref_key:"searchFormRef",ref:r,model:y,layout:"inline",onFinish:w},{default:a(()=>[t(p,{label:"用户名",name:"username"},{default:a(()=>[t(v,{value:y.username,"onUpdate:value":e[0]||(e[0]=n=>y.username=n),placeholder:"请输入用户名","allow-clear":""},null,8,["value"])]),_:1}),t(p,{label:"邮箱",name:"email"},{default:a(()=>[t(v,{value:y.email,"onUpdate:value":e[1]||(e[1]=n=>y.email=n),placeholder:"请输入邮箱","allow-clear":""},null,8,["value"])]),_:1}),t(p,null,{default:a(()=>[t(S,null,{default:a(()=>[t(_,{type:"primary","html-type":"submit"},{icon:a(()=>[t(x(ae))]),default:a(()=>[e[7]||(e[7]=s(" 搜索 ",-1))]),_:1}),t(_,{onClick:q},{icon:a(()=>[t(x(le))]),default:a(()=>[e[8]||(e[8]=s(" 重置 ",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),B("div",fe,[t(S,null,{default:a(()=>[t(_,{type:"primary",onClick:M},{icon:a(()=>[t(x(F))]),default:a(()=>[e[9]||(e[9]=s(" 新增用户 ",-1))]),_:1})]),_:1})]),t(Y,{columns:V,"data-source":k.value,pagination:C,loading:c.value,onChange:G},{headerCell:a(({column:n})=>[n.key==="username"?(b(),j(se,{key:0},[t(x(re),{class:"mr-1"}),s(" "+O(n.title),1)],64)):D("",!0)]),bodyCell:a(({column:n,record:f})=>[n.key==="status"?(b(),z(I,{key:0,color:f.status==="active"?"green":"red"},{default:a(()=>[s(O(f.status==="active"?"启用":"禁用"),1)]),_:2},1032,["color"])):n.key==="role"?(b(),z(I,{key:1,color:$(f.role)},{default:a(()=>[s(O(f.role),1)]),_:2},1032,["color"])):n.key==="action"?(b(),z(S,{key:2},{default:a(()=>[t(_,{type:"link",size:"small",onClick:E=>L(f)},{default:a(()=>[...e[10]||(e[10]=[s(" 编辑 ",-1)])]),_:1},8,["onClick"]),t(_,{type:"link",size:"small",danger:f.status==="active",onClick:E=>J(f)},{default:a(()=>[s(O(f.status==="active"?"禁用":"启用"),1)]),_:2},1032,["danger","onClick"]),t(X,{title:"确定要删除这个用户吗？",onConfirm:E=>Q(f)},{default:a(()=>[t(_,{type:"link",size:"small",danger:""},{default:a(()=>[...e[11]||(e[11]=[s("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):D("",!0)]),_:1},8,["data-source","pagination","loading"])]),_:1}),t(te,{open:d.value,"onUpdate:open":e[6]||(e[6]=n=>d.value=n),title:h.value?"编辑用户":"新增用户",onOk:H,onCancel:W},{default:a(()=>[t(A,{ref_key:"editFormRef",ref:u,model:i,rules:P,layout:"vertical"},{default:a(()=>[t(p,{label:"用户名",name:"username"},{default:a(()=>[t(v,{value:i.username,"onUpdate:value":e[2]||(e[2]=n=>i.username=n),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),t(p,{label:"邮箱",name:"email"},{default:a(()=>[t(v,{value:i.email,"onUpdate:value":e[3]||(e[3]=n=>i.email=n),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),t(p,{label:"角色",name:"role"},{default:a(()=>[t(K,{value:i.role,"onUpdate:value":e[4]||(e[4]=n=>i.role=n),placeholder:"请选择角色"},{default:a(()=>[t(U,{value:"admin"},{default:a(()=>[...e[12]||(e[12]=[s("管理员",-1)])]),_:1}),t(U,{value:"user"},{default:a(()=>[...e[13]||(e[13]=[s("普通用户",-1)])]),_:1}),t(U,{value:"guest"},{default:a(()=>[...e[14]||(e[14]=[s("访客",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),t(p,{label:"状态",name:"status"},{default:a(()=>[t(ee,{value:i.status,"onUpdate:value":e[5]||(e[5]=n=>i.status=n)},{default:a(()=>[t(R,{value:"active"},{default:a(()=>[...e[15]||(e[15]=[s("启用",-1)])]),_:1}),t(R,{value:"inactive"},{default:a(()=>[...e[16]||(e[16]=[s("禁用",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),ge=ue(ve,[["__scopeId","data-v-83f92709"]]);export{ge as default};
