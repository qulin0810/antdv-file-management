import{c as e,I as N,g as me,d as le,r as O,h as J,i as Z,j as fe,k as I,w as n,b as f,o as _,f as d,u as k,_ as oe,a as C,e as B,l as K,m as ce,t as U,n as M}from"./index-zdkt74yQ.js";import{S as ve,R as be}from"./SearchOutlined-DUQJIuJG.js";import{F as ge}from"./FileTextOutlined-D5vlTKM5.js";var ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"},_e={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};function ee(i){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},u=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(a).filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable}))),u.forEach(function(s){he(i,s,a[s])})}return i}function he(i,t,a){return t in i?Object.defineProperty(i,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[t]=a,i}var Q=function(t,a){var u=ee({},t,a.attrs);return e(N,ee({},u,{icon:me}),null)};Q.displayName="FileOutlined";Q.inheritAttrs=!1;function te(i){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},u=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(a).filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable}))),u.forEach(function(s){ke(i,s,a[s])})}return i}function ke(i,t,a){return t in i?Object.defineProperty(i,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[t]=a,i}var W=function(t,a){var u=te({},t,a.attrs);return e(N,te({},u,{icon:ye}),null)};W.displayName="FolderAddOutlined";W.inheritAttrs=!1;function ae(i){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},u=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(a).filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable}))),u.forEach(function(s){xe(i,s,a[s])})}return i}function xe(i,t,a){return t in i?Object.defineProperty(i,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[t]=a,i}var X=function(t,a){var u=ae({},t,a.attrs);return e(N,ae({},u,{icon:_e}),null)};X.displayName="InboxOutlined";X.inheritAttrs=!1;function ne(i){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},u=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(a).filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable}))),u.forEach(function(s){we(i,s,a[s])})}return i}function we(i,t,a){return t in i?Object.defineProperty(i,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[t]=a,i}var V=function(t,a){var u=ne({},t,a.attrs);return e(N,ne({},u,{icon:Oe}),null)};V.displayName="UploadOutlined";V.inheritAttrs=!1;const ze=le({__name:"FileFormModal",props:{visible:{type:Boolean},editData:{}},emits:["update:visible","submit"],setup(i,{emit:t}){const a=i,u=t,s=O(),j=O(!1),g=O([]),c=J({name:"",type:"",department:"",description:""}),w={name:[{required:!0,message:"请输入文件名称",trigger:"blur"},{min:1,max:50,message:"文件名称长度在1-50个字符之间",trigger:"blur"}],type:[{required:!0,message:"请选择文件类型",trigger:"change"}],department:[{required:!0,message:"请选择所属部门",trigger:"change"}]},$=Z(()=>a.editData?"编辑文件":"新建文件"),y=Z({get:()=>a.visible,set:v=>u("update:visible",v)});fe(()=>a.editData,v=>{v?(Object.assign(c,{name:v.name||"",type:v.type||"",department:v.department||"",description:v.description||""}),g.value=[]):x()},{immediate:!0});const x=()=>{var v;(v=s.value)==null||v.resetFields(),g.value=[],Object.assign(c,{name:"",type:"",department:"",description:""})},H=async()=>{var v,l;try{await((v=s.value)==null?void 0:v.validate()),j.value=!0;const z={...c,file:(l=g.value[0])==null?void 0:l.originFileObj};u("submit",z),x(),y.value=!1}catch(z){console.error("表单验证失败:",z)}finally{j.value=!1}},L=()=>{x(),y.value=!1},R=v=>(console.log("上传文件:",v),!1),A=()=>{g.value=[]};return(v,l)=>{const z=f("a-input"),F=f("a-form-item"),b=f("a-select-option"),T=f("a-select"),D=f("a-button"),E=f("a-upload"),q=f("a-textarea"),r=f("a-form"),o=f("a-modal");return _(),I(o,{open:y.value,"onUpdate:open":l[5]||(l[5]=p=>y.value=p),title:$.value,"confirm-loading":j.value,onOk:H,onCancel:L,width:"600px"},{default:n(()=>[e(r,{ref_key:"formRef",ref:s,model:c,rules:w,"label-col":{span:6},"wrapper-col":{span:16},layout:"horizontal"},{default:n(()=>[e(F,{label:"文件名称",name:"name"},{default:n(()=>[e(z,{value:c.name,"onUpdate:value":l[0]||(l[0]=p=>c.name=p),placeholder:"请输入文件名称","allow-clear":""},null,8,["value"])]),_:1}),e(F,{label:"文件类型",name:"type"},{default:n(()=>[e(T,{value:c.type,"onUpdate:value":l[1]||(l[1]=p=>c.type=p),placeholder:"请选择文件类型","allow-clear":""},{default:n(()=>[e(b,{value:"folder"},{default:n(()=>[...l[6]||(l[6]=[d("文件夹",-1)])]),_:1}),e(b,{value:"file"},{default:n(()=>[...l[7]||(l[7]=[d("文件",-1)])]),_:1}),e(b,{value:"image"},{default:n(()=>[...l[8]||(l[8]=[d("图片",-1)])]),_:1}),e(b,{value:"document"},{default:n(()=>[...l[9]||(l[9]=[d("文档",-1)])]),_:1}),e(b,{value:"video"},{default:n(()=>[...l[10]||(l[10]=[d("视频",-1)])]),_:1}),e(b,{value:"audio"},{default:n(()=>[...l[11]||(l[11]=[d("音频",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(F,{label:"所属部门",name:"department"},{default:n(()=>[e(T,{value:c.department,"onUpdate:value":l[2]||(l[2]=p=>c.department=p),placeholder:"请选择所属部门","allow-clear":""},{default:n(()=>[e(b,{value:"tech"},{default:n(()=>[...l[12]||(l[12]=[d("技术部",-1)])]),_:1}),e(b,{value:"design"},{default:n(()=>[...l[13]||(l[13]=[d("设计部",-1)])]),_:1}),e(b,{value:"product"},{default:n(()=>[...l[14]||(l[14]=[d("产品部",-1)])]),_:1}),e(b,{value:"marketing"},{default:n(()=>[...l[15]||(l[15]=[d("市场部",-1)])]),_:1}),e(b,{value:"hr"},{default:n(()=>[...l[16]||(l[16]=[d("人力资源部",-1)])]),_:1}),e(b,{value:"finance"},{default:n(()=>[...l[17]||(l[17]=[d("财务部",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(F,{label:"上传文件",name:"file"},{default:n(()=>[e(E,{"file-list":g.value,"onUpdate:fileList":l[3]||(l[3]=p=>g.value=p),name:"file",multiple:!1,"before-upload":R,"max-count":1,onRemove:A},{default:n(()=>[e(D,null,{default:n(()=>[e(k(V)),l[18]||(l[18]=d(" 选择文件 ",-1))]),_:1})]),_:1},8,["file-list"])]),_:1}),e(F,{label:"文件描述",name:"description"},{default:n(()=>[e(q,{value:c.description,"onUpdate:value":l[4]||(l[4]=p=>c.description=p),placeholder:"请输入文件描述",rows:3,"allow-clear":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title","confirm-loading"])}}}),Fe=oe(ze,[["__scopeId","data-v-4129429f"]]),Se={class:"file-management"},Ce={class:"search-area mb-6"},je={class:"action-area mb-4"},Pe={key:0,class:"flex items-center"},Ue={class:"ant-upload-drag-icon"},Be=le({__name:"index",setup(i){const t=O(),a=O(!1),u=O(!1),s=O(!1),j=O([]),g=O(null),c=J({fileName:"",author:""}),w=J({current:1,pageSize:2,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:r=>`共 ${r} 条记录`}),$=[{title:"文件名",dataIndex:"name",key:"name",width:"30%"},{title:"大小",dataIndex:"size",key:"size",width:"15%"},{title:"作者",dataIndex:"author",key:"author",width:"15%"},{title:"所属部门",dataIndex:"department",key:"department",width:"15%"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime",width:"15%"},{title:"操作",key:"action",width:"10%"}],y=O([{key:"1",name:"项目文档.pdf",type:"file",size:"2.3 MB",author:"张三",updateTime:"2024-01-20 10:30"},{key:"2",name:"设计稿",type:"folder",size:"15.6 MB",author:"李四",updateTime:"2024-01-20 09:15"},{key:"3",name:"会议记录.docx",type:"file",size:"1.2 MB",author:"王五",updateTime:"2024-01-19 16:45"},{key:"4",name:"数据报表.xlsx",type:"file",size:"3.8 MB",author:"赵六",updateTime:"2024-01-19 14:20"}]),x=()=>{a.value=!0,setTimeout(()=>{a.value=!1,w.total=y.value.length},500)},H=()=>{var r;(r=t.value)==null||r.resetFields(),x()},L=()=>{u.value=!0},R=()=>{g.value=null,s.value=!0},A=r=>{g.value=r,s.value=!0},v=r=>{console.log("下载文件:",r)},l=r=>{console.log("删除文件:",r)},z=(r,o,p)=>{w.current=(r==null?void 0:r.current)||1,w.pageSize=(r==null?void 0:r.pageSize)||10,x()},F=()=>{u.value=!1},b=()=>{u.value=!1},T=r=>(console.log("上传文件:",r),!1),D=r=>{if(g.value){const o=y.value.findIndex(p=>p.key===g.value.key);o!==-1&&(y.value[o]={...y.value[o],name:r.name,type:r.type,department:r.department,description:r.description,updateTime:new Date().toLocaleString("zh-CN")})}else{const o={key:Date.now().toString(),name:r.name,type:r.type,size:r.file?E(r.file.size):"0 KB",author:"当前用户",updateTime:new Date().toLocaleString("zh-CN"),department:r.department,description:r.description};y.value.unshift(o)}w.total=y.value.length},E=r=>{if(r===0)return"0 KB";const o=1024,p=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(r)/Math.log(o));return parseFloat((r/Math.pow(o,P)).toFixed(2))+" "+p[P]},q=r=>({tech:"技术部",design:"设计部",product:"产品部",marketing:"市场部",hr:"人力资源部",finance:"财务部"})[r]||r;return x(),(r,o)=>{const p=f("a-input"),P=f("a-form-item"),S=f("a-button"),G=f("a-space"),re=f("a-form"),ie=f("a-popconfirm"),ue=f("a-table"),se=f("a-card"),de=f("a-upload-dragger"),pe=f("a-modal");return _(),C("div",Se,[e(se,null,{default:n(()=>[B("div",Ce,[e(re,{ref_key:"searchFormRef",ref:t,model:c,layout:"inline",onFinish:x},{default:n(()=>[e(P,{label:"文件名",name:"fileName"},{default:n(()=>[e(p,{value:c.fileName,"onUpdate:value":o[0]||(o[0]=m=>c.fileName=m),placeholder:"请输入文件名","allow-clear":""},null,8,["value"])]),_:1}),e(P,{label:"作者",name:"author"},{default:n(()=>[e(p,{value:c.author,"onUpdate:value":o[1]||(o[1]=m=>c.author=m),placeholder:"请输入作者","allow-clear":""},null,8,["value"])]),_:1}),e(P,null,{default:n(()=>[e(G,null,{default:n(()=>[e(S,{type:"primary","html-type":"submit"},{icon:n(()=>[e(k(ve))]),default:n(()=>[o[5]||(o[5]=d(" 搜索 ",-1))]),_:1}),e(S,{onClick:H},{icon:n(()=>[e(k(be))]),default:n(()=>[o[6]||(o[6]=d(" 重置 ",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),B("div",je,[e(G,null,{default:n(()=>[e(S,{type:"primary",onClick:L},{icon:n(()=>[e(k(V))]),default:n(()=>[o[7]||(o[7]=d(" 上传文件 ",-1))]),_:1}),e(S,{type:"primary",onClick:R},{icon:n(()=>[e(k(W))]),default:n(()=>[o[8]||(o[8]=d(" 新建文件 ",-1))]),_:1})]),_:1})]),e(ue,{columns:$,"data-source":y.value,pagination:w,loading:a.value,onChange:z},{headerCell:n(({column:m})=>[m.key==="name"?(_(),C(M,{key:0},[e(k(ge),{class:"mr-1"}),d(" "+U(m.title),1)],64)):K("",!0)]),bodyCell:n(({column:m,record:h})=>[m.key==="name"?(_(),C("div",Pe,[h.type==="file"?(_(),I(k(Q),{key:0,class:"mr-2 text-blue-500"})):(_(),I(k(ce),{key:1,class:"mr-2 text-orange-500"})),d(" "+U(h.name),1)])):m.key==="size"?(_(),C(M,{key:1},[d(U(h.size),1)],64)):m.key==="author"?(_(),C(M,{key:2},[d(U(h.author),1)],64)):m.key==="department"?(_(),C(M,{key:3},[d(U(q(h.department)),1)],64)):m.key==="updateTime"?(_(),C(M,{key:4},[d(U(h.updateTime),1)],64)):m.key==="action"?(_(),I(G,{key:5},{default:n(()=>[e(S,{type:"link",size:"small",onClick:Y=>A(h)},{default:n(()=>[...o[9]||(o[9]=[d(" 编辑 ",-1)])]),_:1},8,["onClick"]),e(S,{type:"link",size:"small",onClick:Y=>v(h)},{default:n(()=>[...o[10]||(o[10]=[d(" 下载 ",-1)])]),_:1},8,["onClick"]),e(ie,{title:"确定要删除这个文件吗？",onConfirm:Y=>l(h)},{default:n(()=>[e(S,{type:"link",size:"small",danger:""},{default:n(()=>[...o[11]||(o[11]=[d("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):K("",!0)]),_:1},8,["data-source","pagination","loading"])]),_:1}),e(pe,{open:u.value,"onUpdate:open":o[3]||(o[3]=m=>u.value=m),title:"上传文件",onOk:F,onCancel:b},{default:n(()=>[e(de,{"file-list":j.value,"onUpdate:fileList":o[2]||(o[2]=m=>j.value=m),name:"file",multiple:!0,"before-upload":T},{default:n(()=>[B("p",Ue,[e(k(X))]),o[12]||(o[12]=B("p",{class:"ant-upload-text"},"点击或拖拽文件到此区域上传",-1)),o[13]||(o[13]=B("p",{class:"ant-upload-hint"},"支持单个或批量上传",-1))]),_:1},8,["file-list"])]),_:1},8,["open"]),e(Fe,{visible:s.value,"onUpdate:visible":o[4]||(o[4]=m=>s.value=m),"edit-data":g.value,onSubmit:D},null,8,["visible","edit-data"])])}}}),Ne=oe(Be,[["__scopeId","data-v-4d74ae63"]]);export{Ne as default};
