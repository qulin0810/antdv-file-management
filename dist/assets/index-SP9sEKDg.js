import{_ as P,r as C,n as D,e as m,b as B,o as x,c as s,h as T,i as F,f as I,w as i,g as y,k as M,l as N,t as U,j as w,M as O}from"./index-18XKJJX4.js";const R={class:"pagination-container"},G={__name:"Pagination",props:{current:{type:Number,default:1},pageSize:{type:Number,default:10},total:{type:Number,default:0},pageSizeOptions:{type:Array,default:()=>["10","20","50","100"]}},emits:["update:current","update:pageSize","change"],setup(z,{emit:S}){const g=z,n=S,t=C(g.current),f=C(g.pageSize);D(()=>g.current,l=>{t.value=l}),D(()=>g.pageSize,l=>{f.value=l});const u=(l,o)=>{t.value=l,f.value=o,n("update:current",l),n("update:pageSize",o),n("change",{current:l,pageSize:o})},p=(l,o)=>{t.value=1,f.value=o,n("update:current",1),n("update:pageSize",o),n("change",{current:1,pageSize:o})},$=l=>`共 ${l} 条记录`;return(l,o)=>{const b=m("a-pagination");return x(),B("div",R,[s(b,{current:t.value,"onUpdate:current":o[0]||(o[0]=v=>t.value=v),"page-size":f.value,"onUpdate:pageSize":o[1]||(o[1]=v=>f.value=v),total:z.total,"show-size-changer":"","show-quick-jumper":"","show-total":$,"page-size-options":z.pageSizeOptions,onChange:u,onShowSizeChange:p},null,8,["current","page-size","total","page-size-options"])])}}},H=P(G,[["__scopeId","data-v-5c0ae0d3"]]),J={class:"container"},K={class:"header"},L={class:"search-form"},Q={__name:"index",setup(z){const S=C(!1),g=C([]),n=T({name:"",age:""}),t=T({current:1,pageSize:10,total:0}),f=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"姓名",dataIndex:"name",key:"name"},{title:"年龄",dataIndex:"age",key:"age"},{title:"地址",dataIndex:"address",key:"address"},{title:"状态",dataIndex:"status",key:"status"},{title:"操作",key:"action",width:200}],u=Array.from({length:156},(a,e)=>({id:e+1,name:`用户${e+1}`,age:Math.floor(Math.random()*50)+18,address:`北京市朝阳区第${e+1}街道`,status:Math.random()>.3?1:0,email:`user${e+1}@example.com`,createTime:new Date(Date.now()-Math.random()*1e10).toISOString()})),p=async()=>{S.value=!0;try{await new Promise(c=>setTimeout(c,300));let a=u.filter(c=>{let k=!0;return n.name&&!c.name.includes(n.name)&&(k=!1),n.age&&c.age.toString()!==n.age&&(k=!1),k});const e=(t.current-1)*t.pageSize,r=e+t.pageSize,_=a.slice(e,r);g.value=_,t.total=a.length,console.log(`当前页: ${t.current}, 每页: ${t.pageSize}, 总数: ${t.total}`)}catch(a){console.error("数据加载失败:",a),w.error("数据加载失败")}finally{S.value=!1}},$=()=>{t.current=1,p()},l=()=>{n.name="",n.age="",t.current=1,p()},o=a=>{console.log("分页变化:",a),t.current=a.current,t.pageSize=a.pageSize,p()},b=a=>{O.confirm({title:"确认删除",content:`确定要删除用户"${a.name}"吗？此操作不可恢复。`,okText:"确认",cancelText:"取消",onOk(){const e=u.findIndex(r=>r.id===a.id);e!==-1&&(u.splice(e,1),p(),w.success("删除成功"))}})},v=a=>{const e=a.status===1?0:1,r=e===1?"启用":"禁用";O.confirm({title:"确认操作",content:`确定要${r}用户"${a.name}"吗？`,okText:"确认",cancelText:"取消",onOk(){const _=u.find(c=>c.id===a.id);_&&(_.status=e,p(),w.success(`${r}成功`))}})},V=()=>{const a={id:u.length+1,name:`新用户${u.length+1}`,age:Math.floor(Math.random()*30)+20,address:"北京市海淀区",status:1,email:`newuser${u.length+1}@example.com`,createTime:new Date().toISOString()};u.unshift(a),t.current=1,p(),w.success("新增用户成功")};return F(()=>{p()}),(a,e)=>{const r=m("a-button"),_=m("a-input"),c=m("a-form-item"),k=m("a-form"),A=m("a-tag"),j=m("a-space"),q=m("a-table");return x(),B("div",J,[I("div",K,[e[5]||(e[5]=I("h2",null,"用户管理",-1)),s(r,{type:"primary",onClick:V},{default:i(()=>[...e[4]||(e[4]=[y("新增用户",-1)])]),_:1})]),I("div",L,[s(k,{layout:"inline",model:n},{default:i(()=>[s(c,{label:"姓名"},{default:i(()=>[s(_,{value:n.name,"onUpdate:value":e[0]||(e[0]=d=>n.name=d),placeholder:"请输入姓名","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),s(c,{label:"年龄"},{default:i(()=>[s(_,{value:n.age,"onUpdate:value":e[1]||(e[1]=d=>n.age=d),placeholder:"请输入年龄","allow-clear":"",style:{width:"200px"}},null,8,["value"])]),_:1}),s(c,null,{default:i(()=>[s(r,{type:"primary",onClick:$},{default:i(()=>[...e[6]||(e[6]=[y("搜索",-1)])]),_:1}),s(r,{style:{"margin-left":"8px"},onClick:l},{default:i(()=>[...e[7]||(e[7]=[y("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),s(q,{columns:f,"data-source":g.value,pagination:!1,loading:S.value,"row-key":"id"},{bodyCell:i(({column:d,record:h})=>[d.key==="status"?(x(),M(A,{key:0,color:h.status===1?"green":"red"},{default:i(()=>[y(U(h.status===1?"已启用":"已禁用"),1)]),_:2},1032,["color"])):N("",!0),d.key==="action"?(x(),M(j,{key:1},{default:i(()=>[s(r,{size:"small",type:h.status===1?"default":"primary",onClick:E=>v(h)},{default:i(()=>[y(U(h.status===1?"禁用":"启用"),1)]),_:2},1032,["type","onClick"]),s(r,{size:"small",danger:"",onClick:E=>b(h)},{default:i(()=>[...e[8]||(e[8]=[y(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)):N("",!0)]),_:1},8,["data-source","loading"]),s(H,{current:t.current,"onUpdate:current":e[2]||(e[2]=d=>t.current=d),"page-size":t.pageSize,"onUpdate:pageSize":e[3]||(e[3]=d=>t.pageSize=d),total:t.total,onChange:o},null,8,["current","page-size","total"])])}}},X=P(Q,[["__scopeId","data-v-ab0924e7"]]);export{X as default};
